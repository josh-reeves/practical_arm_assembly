<!DOCTYPE html>
<html>
    <head>
        <title>Practical ARM Assembly Notes</title>
        <link rel="stylesheet" href="/practical_arm_assembly/assets/styles/default-styles.css">
        <script src="/practical_arm_assembly/assets/scripts/utils.js"></script>
        <script src="/practical_arm_assembly/assets/scripts/eventListeners.js"></script>
        <script src="/practical_arm_assembly/assets/components/components.js" type="module"></script>
    </head>

    <body>
        <page-header></page-header>

        <nav-menu></nav-menu>

        <main>
            <details class="content-container" open>
                <summary><p>Shift</p><div><button class="a32-toggle inactive">A32</button><button class="a64-toggle">A64</button></div></summary>
                <p>Shift operations move the values of each bit in a register to the right or left a specified number of bits. Bits that are shifted beyond the bounds of their register fall off of the register. Their value is permanently lost and the register is padded with zeros in their place. Subsequent shifts in the opposing direction will not restore the lost value. </p>
                <h3>Logical Shift Right</h3>
                <p>The bits of a register can be shifted to the right with the LSR instruction. This is effectively the same as dividing the value by 2 the number of times its shifted. The LSR instruction takes three operands:</p>
                <ul> 
                    <li>A register to store the result of the operation.</li>
                    <li>The register containing the binary value to be shifted.</li>
                    <li>An immediate or register indicating how many bits the value should be shifted by.</li>
                </ul>
                <div class="illustration codebox">
                    <copy-button></copy-button>
                    <p>lsr r0, r0, #0x12 <span class="comment">// Shifts the bits in register r0 12 bits to the right.</span></p>
                </div>
                <p>The shifted register can be used as the destination register. This is effectively the same as multiplying the value by 2 the number of times its shifted. If no destination register is provided, the register to be shifted will be used as the destination.</p>
                <h3>Logical Shift Left</h3>
                <p>The bits of a register can be shifted to the left with the LSL instruction. The LSL instruction takes three operands:</p>
                <ul>
                    <li>A register to store the result of the operation.</li>
                    <li>The register containing the binary value to be shifted.</li>
                    <li>An immediate or register indicating how many bits the value should be shifted by.</li>
                </ul>
                <div class="illustration codebox">
                    <copy-button></copy-button>
                    <p>lsl r0, r0, #0x12 <span class="comment">// Shifts the bits in register r0 12 bits to the left.</span></p>
                </div>
                <p>The shifted register can be used as the destination register. If no destination register is provided, the register to be shifted will be used as the destination.</p>
                <h3>Arithmetic Shift Right</h3>
                <p>Like the LSR instruction, the Arithmetic Shift Right (ASR) instruction shifts the bits in a register to the right the specified number of times. Unlike the other shift operations, however, the Arithmetic shift pads the register with the value of the sign bit. As explained is Section 5, digital systems that uses two's complement to represent negative values interpret a binary value's sign from its most significant bit. This means that, were the value to be shifted to the right and padded with zeros, the sign bit would be lost:</p>
                <div class="illustration">
                    <p class="emphasized">The binary value -23 being shifted one bit to the right via the LSR instruction:</p>
                    <div class="codebox">
                        <copy-button></copy-button>
                        <p class="centered">11111111111111111111111110111011</p>
                        <hr>
                        <p class="centered">01111111111111111111111111011101</p>
                    </div>
                </div>
                <p>To address this, the Arithmetic Shift Right instruction pads the register with the value from the most significant digit in order to preserve the value's sign:</p>
                <div class="illustration">
                    <p class="emphasized">The binary value -23 being shifted one bit to the right via the ASR instruction. Note that the sign bit is maintained:</p>
                    <div class="codebox">
                        <copy-button></copy-button>
                        <p class="centered">11111111111111111111111110111011</p>
                        <hr>
                        <p class="centered">11111111111111111111111111011101</p>
                    </div>
                </div>
                <p>The ASR instruction takes three operands:</p>
                <ul>
                    <li>A register to store the result of the operation.</li>
                    <li>The register containing the binary value to be shifted.</li>
                    <li>An immediate or register indicating how many bits the value should be shifted by.</li>
                </ul>
                <div class="illustration codebox">
                    <copy-button></copy-button>
                    <p>asr r0, r0, #0x12 <span class="comment">// Shifts the bits in register r0 12 bits to the right, padding the register with the sign bit.</span></p>
                </div>
                <p>The shifted register can be used as the destination register. If no destination register is provided, the register to be shifted will be used as the destination.</p>

            </details>

            <details class="content-container" open>
                <summary><p>Rotate</p><div><button class="a32-toggle inactive">A32</button><button class="a64-toggle">A64</button></div></summary>
                <p>Rotation operations also move the value of each bit in a register. Unlike shift operations, however, bits that are shifted beyond the bounds of the register on one end are moved around (i.e. rotated) to the other end of the register.</p>
                <h3>Rotate Right</h3>
                <p>The bits of a register can be rotated to the right with the Rotate Right (ROR) instruction. The ror instruction takes three operands:</p>
                <ul>
                    <li>A register to store the result of the operation.</li>
                    <li>The register containing the binary value to be rotated.</li>
                    <li>An immediate or register indicating how many bits the value should be rotated by.</li>
                </ul>
                <p>The rotated register can be used as the destination register. If no destination register is provided, the register to be rotated will be used as the destination.</p>
                <div class="illustration codebox">
                    <copy-button></copy-button>
                    <p>ror r0, r0, #0x12 <span class="comment">// Shifts the bits in register r0 12 bits to the right and stores the result in r0..</span></p>
                </div>
                <p>Because any rotation to the left can be accomplished via a sufficient number of rotations to the right, ARM assembly does not provide a separate rotate left instruction.</p>
            </details>
            
            <details class="content-container" open>
                <summary><p>Summary</p><button class="a32-toggle inactive">A32</button><button class="a64-toggle">A64</button></div></summary>
            </details>
        </main>
    </body>
</html>
